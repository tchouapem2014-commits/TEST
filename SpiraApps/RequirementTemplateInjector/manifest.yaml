# ============================================================
# REQUIREMENT TEMPLATE INJECTOR (RTI)
# SpiraApp Manifest - Version 2.0.0
# ============================================================
# Approche: 5 slots avec dropdown natif (settingTypeId: 11)
# Le dropdown liste automatiquement les types d'exigences du produit
# v1.1.0: Ajout du bouton "Injecter Template" dans la toolbar
# v2.0.0: Support de n'importe quel champ RichText (standard ou custom)

guid: b3f5a8d2-7c41-4e9a-b6d8-1f2e3a4b5c6d
name: RequirementTemplateInjector
caption: Requirement Template Injector
summary: Injects formatted HTML templates into RichText fields when creating requirements
description: >-
  This SpiraApp automatically injects description templates formatted in HTML
  when creating new requirements in SpiraPlan. Configure up to 5 requirement
  types with their own templates using native dropdown selection.
  Includes a toolbar button for manual template injection.
productSummary: Auto-inject HTML templates into requirement description fields
productDescription: >-
  This SpiraApp automatically injects description templates formatted in HTML
  when creating new requirements in SpiraPlan. Select requirement types from
  dropdown lists and configure templates using the RichText editor.
  A toolbar button allows manual injection when the description field is empty.
version: 2.0
author: SpiraApps Developer
license: MIT
copyright: Copyright 2025
url: https://github.com/spiraapps/requirement-template-injector

# ============================================================
# PRODUCT SETTINGS - 5 SLOTS (Dropdown + Template RichText)
# ============================================================
# settingTypeId: 1=String, 2=RichText, 3=ArtifactCustomProperty, 7=ArtifactStandardField
# settingTypeId: 10=Boolean, 11=ArtifactTypeSingleSelect
# artifactTypeId: 1=Requirement (filtre le dropdown)

productSettings:

  # ══════════════════════════════════════════════════════════════
  # CHAMP CIBLE (v2.0)
  # ══════════════════════════════════════════════════════════════
  # Champ RichText standard (ex: Description) ou laisser vide pour Description par defaut
  - settingTypeId: 1
    name: target_field
    caption: Champ RichText cible
    position: 1
    placeholder: Description
    tooltip: >-
      Nom du champ RichText cible (ex: Description, Custom_01, Custom_02).
      Laissez vide pour utiliser Description par defaut.

  # ══════════════════════════════════════════════════════════════
  # SLOT 1
  # ══════════════════════════════════════════════════════════════
  - settingTypeId: 11
    name: type_id_1
    caption: Type d'exigence #1
    position: 2
    artifactTypeId: 1
    tooltip: Selectionnez le type d'exigence

  - settingTypeId: 2
    name: template_1
    caption: Template #1
    position: 3
    tooltip: Template HTML pour le type ci-dessus

  # ══════════════════════════════════════════════════════════════
  # SLOT 2
  # ══════════════════════════════════════════════════════════════
  - settingTypeId: 11
    name: type_id_2
    caption: Type d'exigence #2
    position: 4
    artifactTypeId: 1
    tooltip: Selectionnez le type d'exigence

  - settingTypeId: 2
    name: template_2
    caption: Template #2
    position: 5
    tooltip: Template HTML pour le type ci-dessus

  # ══════════════════════════════════════════════════════════════
  # SLOT 3
  # ══════════════════════════════════════════════════════════════
  - settingTypeId: 11
    name: type_id_3
    caption: Type d'exigence #3
    position: 6
    artifactTypeId: 1
    tooltip: Selectionnez le type d'exigence

  - settingTypeId: 2
    name: template_3
    caption: Template #3
    position: 7
    tooltip: Template HTML pour le type ci-dessus

  # ══════════════════════════════════════════════════════════════
  # SLOT 4
  # ══════════════════════════════════════════════════════════════
  - settingTypeId: 11
    name: type_id_4
    caption: Type d'exigence #4
    position: 8
    artifactTypeId: 1
    tooltip: Selectionnez le type d'exigence

  - settingTypeId: 2
    name: template_4
    caption: Template #4
    position: 9
    tooltip: Template HTML pour le type ci-dessus

  # ══════════════════════════════════════════════════════════════
  # SLOT 5
  # ══════════════════════════════════════════════════════════════
  - settingTypeId: 11
    name: type_id_5
    caption: Type d'exigence #5
    position: 10
    artifactTypeId: 1
    tooltip: Selectionnez le type d'exigence

  - settingTypeId: 2
    name: template_5
    caption: Template #5
    position: 11
    tooltip: Template HTML pour le type ci-dessus

  # ══════════════════════════════════════════════════════════════
  # OPTIONS
  # ══════════════════════════════════════════════════════════════
  - settingTypeId: 10
    name: debug_mode
    caption: Mode debug
    position: 20
    tooltip: Affiche les logs dans la console navigateur (F12)

# ============================================================
# PAGE CONTENTS - Code injecte sur RequirementDetails
# ============================================================
pageContents:
  - pageId: 9
    name: injector
    code: "file://injector.js"

# ============================================================
# MENUS - Bouton dans la toolbar RequirementDetails
# ============================================================
menus:
  - pageId: 9
    caption: RTI
    icon: fa-solid fa-file-import
    isActive: true
    entries:
      - name: injectTemplate
        caption: Injecter Template
        tooltip: Injecte le template dans le champ cible (si vide)
        icon: fa-solid fa-paste
        isActive: true
        actionTypeId: 2
        action: injectTemplate
